!function(e){function t(t){for(var o,a,c=t[0],l=t[1],s=t[2],d=0,p=[];d<c.length;d++)a=c[d],r[a]&&p.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={1:0};var i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="http://localhost:3000/";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;i.push([671,0]),n()}({182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(2)),r=n(87),i=a(n(86));function a(e){return e&&e.__esModule?e:{default:e}}const{white0:c}=i.default;t.default=(e=>{const{points:t,strokeDasharray:n}=e;return o.default.createElement("polyline",{points:(0,r.cosineCurvePoints)(...t),fill:"none",stroke:c,strokeWidth:3,strokeDasharray:n})})},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=u(n(362)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(2),c=u(a),l=u(n(79)),s=u(n(68));function u(e){return e&&e.__esModule?e:{default:e}}let d=(p=(o=class extends a.Component{constructor(){super(),this.tab=!1,this.selectionStart=-1}componentDidUpdate(){const{selectionStart:e}=this;if(-1<e){const t=e+1;l.default.findDOMNode(this).setSelectionRange(t,t)}this.selectionStart=-1}onKeyDown(...e){const{props:{onKeyDown:t}}=this,{keyCode:n,currentTarget:{selectionStart:o}}=e[0];9===n&&(this.selectionStart=o),"function"==typeof t&&t(...e)}render(){const{props:e}=this,t=(0,r.default)(e);return delete t.onKeyDown,c.default.createElement("textarea",i({},t,{onKeyDown:this.onKeyDown}))}}).prototype,h="onKeyDown",f=[s.default],b=Object.getOwnPropertyDescriptor(o.prototype,"onKeyDown"),_=o.prototype,v={},Object.keys(b).forEach(function(e){v[e]=b[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=f.slice().reverse().reduce(function(e,t){return t(p,h,e)||e},v),_&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(_):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(p,h,v),v=null),o);var p,h,f,b,_,v;t.default=d},268:function(e,t,n){(t=e.exports=n(29)(!1)).push([e.i,"html,\nbody,\nmain {\n  width: 100%;\n  height: 100%; }\n\nbody {\n  margin: 0;\n  font-family: sans-serif; }\n  body.index__cursor-move_3IF2O * {\n    cursor: move; }\n\n.ReactCodeMirror {\n  height: 100%; }\n\n.CodeMirror {\n  height: 100%; }\n",""]),t.locals={"cursor-move":"index__cursor-move_3IF2O"}},269:function(e,t,n){var o=n(268);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},270:function(e,t,n){(t=e.exports=n(29)(!1)).push([e.i,"body {\n  box-sizing: border-box; }\n\n.App__wrap_1SQHV {\n  width: 100%;\n  height: 100%;\n  background-color: #1e1e1e; }\n  .App__wrap_1SQHV footer {\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    border-top: 1px solid #2b2b2b;\n    color: #d4d4d4;\n    background-color: #1e1e1e; }\n\n.App__base_2Rw2G {\n  width: 100%;\n  height: calc(100% - 36px); }\n\n.App__link_36M0v {\n  font-weight: 100;\n  padding: 5px 10px;\n  color: #555555;\n  display: inline-block;\n  text-decoration: none; }\n  .App__link_36M0v > span {\n    padding: 3px 6px;\n    display: inline-block;\n    border-bottom: 1px transparent solid; }\n\n.App__active_3QbdL {\n  color: #d4d4d4; }\n  .App__active_3QbdL > span {\n    border-bottom-color: #007acc; }\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",wrap:"App__wrap_1SQHV",base:"App__base_2Rw2G",link:"App__link_36M0v",active:"App__active_3QbdL"}},271:function(e,t,n){var o=n(270);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},286:function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(2),a=d(i),c=n(47),l=d(n(30)),s=d(n(285));n(280),n(278),n(276),n(272);var u=d(n(68));function d(e){return e&&e.__esModule?e:{default:e}}let p=(0,c.connect)(({htmlEditor:e})=>({code:e}))((h=(r=class extends i.Component{onChange(e){const{props:{dispatch:t}}=this;t(l.default.onChangeHtml(e))}render(){const{props:{code:e}}=this;return a.default.createElement(s.default,{value:e,onChange:this.onChange,options:{mode:"htmlmixed",theme:"monokai",styleActiveLine:!0,lineNumbers:!0}})}}).prototype,f="onChange",b=[u.default],_=Object.getOwnPropertyDescriptor(r.prototype,"onChange"),v=r.prototype,m={},Object.keys(_).forEach(function(e){m[e]=_[e]}),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=b.slice().reverse().reduce(function(e,t){return t(h,f,e)||e},m),v&&void 0!==m.initializer&&(m.value=m.initializer?m.initializer.call(v):void 0,m.initializer=void 0),void 0===m.initializer&&(Object.defineProperty(h,f,m),m=null),o=r))||o;var h,f,b,_,v,m;t.default=p},287:function(e,t,n){(t=e.exports=n(29)(!1)).push([e.i,".HTMLRenderer__base_y4ZXu {\n  display: block;\n  width: 100%;\n  height: 100%;\n  border: none;\n  background-color: white;\n  position: absolute;\n  left: 0;\n  top: 0; }\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",base:"HTMLRenderer__base_y4ZXu"}},288:function(e,t,n){var o=n(287);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=u(n(90)),i=u(n(289)),a=n(2),c=u(a),l=n(47),s=n(48);function u(e){return e&&e.__esModule?e:{default:e}}n(288);const d=new DOMParser;let p=(0,l.connect)(({blocks:e,pinLinks:t,htmlEditor:n})=>({blocks:e,links:t,html:n}))(o=class extends a.Component{toEvalableString(){const{props:{blocks:e}}=this,t=e.first();return t?this.toEvalableStringSub(t.get("id")):null}toEvalableStringSub(e){if(null===e)return"null";const{props:{blocks:t}}=this,n=t.find(t=>t.get("id")===e),o=n.get("inputPins").map(t=>this.toEvalableStringSub(this.findOutputBlockIdFromLinks({input:{block:e,pin:t.get("index")}}))).toJS();switch(n.get("type")){case s.BLOCK.TYPE_VIEW:return o;case s.BLOCK.TYPE_VALUE:return n.get("value");case s.BLOCK.TYPE_FUNCTION:const[e,...t]=o,r=`(${(0,i.default)(t,", ")})`;return e?`${e}[${JSON.stringify(n.get("value"))}]${r}`:`${n.get("value")}${r}`;case s.BLOCK.TYPE_PROPERTY:return`${o[0]}[${JSON.stringify(n.get("value"))}]`;case s.BLOCK.TYPE_OPERATOR:return`(${o[0]}${n.get("value")}${o[1]})`;default:return'"UNKNOWN_BLOCK"'}}findOutputBlockIdFromLinks(e){const{props:{links:t}}=this;let n=null;return t.some(t=>!!t.match(e)&&(n=t.getIn(["output","block"]),!0)),n}render(){const{props:{html:e}}=this,t=d.parseFromString(e,"text/html"),n=t.querySelector("body"),o=document.createElement("script"),a=(0,i.default)((0,r.default)(this.toEvalableString(),e=>`parent.postMessage({ type: 'chain-result', value: ${e} }, '*')`),"\n");return o.innerHTML=`\n\t\t\tparent.postMessage({ type: 'chain-clear' }, '*');\n\t\t\ttry {\n\t\t\t\t(0, eval)(${JSON.stringify(a)});\n\t\t\t} catch (err) {\n\t\t\t\tparent.postMessage({ type: 'chain-error', value: String(err) }, '*');\n\t\t\t}\n\t\t`,n.appendChild(o),c.default.createElement("iframe",{srcDoc:`<!doctype html>${t.documentElement.outerHTML}`,className:"HTMLRenderer__base_y4ZXu"})}})||o;t.default=p},292:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(66),i=n(30),a=(o=i)&&o.__esModule?o:{default:o};t.default=(0,r.handleActions)({[a.default.onChangeHtml]:(e,t)=>{const{payload:n}=t;return n}},'<!doctype html>\n<html>\n<head>\n\t<meta charset="utf-8" />\n</head>\n<body>\n\t<h1>Hello, World!</h1>\n</body>\n</html>\n')},293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(83),i=n(74),a=n(66),c=n(30),l=(o=c)&&o.__esModule?o:{default:o};t.default=(0,a.handleActions)({[l.default.addPinLink]:(e,t)=>{const{payload:n}=t,o={input:n.input};return e.filter(e=>!e.match(o)).push(new i.PinLink(n))},[l.default.deleteBlock]:(e,t)=>{const{payload:n}=t;return e.filter(e=>!e.hasBlock(n))},[l.default.removePinLinkByQuery]:(e,t)=>{const{payload:n}=t;return e.filter(e=>!e.match(n))},[l.default.deletePin]:(e,t)=>{const{payload:{id:n,removed:o}}=t;return 0===o?e:e.filter(e=>!e.match({input:{block:n,pin:o}}))}},(0,r.List)())},294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(74),i=n(66),a=n(30),c=(o=a)&&o.__esModule?o:{default:o};t.default=(0,i.handleActions)({[c.default.startPointLink]:(e,t)=>{const{payload:{x:n,y:o}}=t;return e.start(n,o)},[c.default.endPointLink]:(e,t)=>{const{payload:{x:n,y:o}}=t;return e.end(n,o)}},new r.PointLink)},295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(74),i=n(66),a=n(30),c=(o=a)&&o.__esModule?o:{default:o};t.default=(0,i.handleActions)({[c.default.updateBlockCreator]:(e,t)=>{const{payload:n}=t;return e.merge(n)},[c.default.showBlockCreator]:(e,t)=>{const{payload:{x:n,y:o}}=t;return e.show(n,o)}},new r.BlockCreator)},30:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(388),i=(o=r)&&o.__esModule?o:{default:o},a=n(66),c=n(87);t.default=(0,a.createActions)({ADD_BLOCK:e=>(0,i.default)({id:c.generator.id()},e),UPDATE_BLOCK:(e,t)=>({id:e,patch:t}),DELTA_MOVE_BLOCK:(e,t,n)=>({id:e,dx:t,dy:n}),TOGGLE_BLOCK_CREATOR:(e,t)=>({x:e,y:t})},"DELETE_BLOCK","UPDATE_BLOCK_CREATOR","ADD_PIN","DELETE_PIN","START_POINT_LINK","END_POINT_LINK","ADD_PIN_LINK","REMOVE_PIN_LINK_BY_QUERY","ON_CHANGE_HTML","CLEAR_VIEW_BLOCK","PUSH_VIEW_BLOCK","SHOW_BLOCK_CREATOR")},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),r=n(74),i=n(66),a=s(n(30)),c=n(48),l=s(n(86));function s(e){return e&&e.__esModule?e:{default:e}}const{blue2:u,white0:d}=l.default;t.default=(0,i.handleActions)({[a.default.addBlock]:(e,t)=>{const{payload:n}=t;return e.push(new r.Block(n))},[a.default.updateBlock]:(e,t)=>{const{payload:{id:n,patch:o}}=t,r=e.findIndex(e=>e.get("id")===n);return e.update(r,e=>e.merge(o))},[a.default.deleteBlock]:(e,t)=>{const{payload:n}=t,o=e.findIndex(e=>e.get("id")===n);return e.filter((e,t)=>t!==o)},[a.default.deltaMoveBlock]:(e,t)=>{const{payload:{id:n,dx:o,dy:r}}=t,i=e.findIndex(e=>e.get("id")===n);return e.update(i,e=>e.dmove(o,r))},[a.default.addPin]:(e,t)=>{const{payload:n}=t,o=e.findIndex(e=>e.get("id")===n);return e.update(o,e=>e.updateIn(["inputPins"],t=>t.push(e.createPin(e.type===c.BLOCK.TYPE_FUNCTION?u:d,c.PIN.TYPE_INPUT))).recalculateHeight())},[a.default.deletePin]:(e,t)=>{const{payload:{id:n}}=t,o=e.findIndex(e=>e.get("id")===n);return e.update(o,e=>e.updateIn(["inputPins"],e=>e.slice(0,Math.max(1,e.size-1))).recalculateHeight())},[a.default.clearViewBlock]:e=>e.update(0,e=>e.set("value","")),[a.default.pushViewBlock]:(e,t)=>{const{payload:n}=t;return e.update(0,e=>{const t=e.get("value");return e.set("value",t?`${t}\n${n}`:n)})}},(0,o.List)())},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(173),r=s(n(301)),i=s(n(295)),a=s(n(294)),c=s(n(293)),l=s(n(292));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.combineReducers)({blocks:r.default,blockCreator:i.default,pointLink:a.default,pinLinks:c.default,htmlEditor:l.default})},303:function(e,t,n){(t=e.exports=n(29)(!1)).push([e.i,".Chain__base_L0Lag {\n  background-color: #1e1e1e;\n  position: relative;\n  width: 100%;\n  height: 100%; }\n  .Chain__base_L0Lag > svg {\n    display: block;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0; }\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",base:"Chain__base_L0Lag"}},304:function(e,t,n){var o=n(303);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=d(n(316)),i=d(n(41)),a=d(n(181)),c=n(2),l=d(c),s=n(48),u=d(n(68));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const h=s.PIN.RADIUS+1;let f=(p((o=class extends c.Component{constructor(){super(),this.state={enter:!1,connecting:!1}}onMouseDownOrTouchStart(e){const{props:{model:t,parent:n,onMouseDownOrTouchStart:o}}=this;o(e,t,n),document.addEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.addEventListener("touchend",this.onMouseUpOrTouchEndDocument),this.setState({connecting:!0})}onMouseup(e){const{props:{model:t,onMouseUpOrTouchEnd:n,parent:o}}=this;n(e,t,o)}onMouseEnter(){this.setState({enter:!0})}onMouseLeave(){this.setState({enter:!1})}onTouchEnd(e){const{pageX:t,pageY:n}=e.changedTouches.item(0);(0,a.default)(document.querySelectorAll("[data-pin]"),o=>{const{left:c,top:l,width:s,height:u}=o.getBoundingClientRect();return c<=t&&t<=c+s&&l<=n&&n<=l+u&&((0,a.default)((0,i.default)(o),t=>{if((0,r.default)(t,"__reactInternalInstance$")){const{_currentElement:{_owner:{_currentElement:{props:{model:n,onMouseUpOrTouchEnd:r,parent:i}}}}}=o[t];return r(e,n,i),!0}return!1}),!0)})}onMouseUpOrTouchEndDocument(){document.removeEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.removeEventListener("touchend",this.onMouseUpOrTouchEndDocument),this.setState({connecting:!1})}render(){const{props:{model:e},state:{enter:t,connecting:n}}=this,o=e.get("color"),r=e.get("type");return l.default.createElement("svg",{"data-pin":!0,onMouseDown:this.onMouseDownOrTouchStart,onTouchStart:this.onMouseDownOrTouchStart,onMouseUp:this.onMouseup,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:this.onTouchEnd,style:{position:"absolute",left:e.get("cx")-h,top:e.get("cy")-h,width:2*s.PIN.RADIUS+2,height:2*s.PIN.RADIUS+2,cursor:"pointer"}},l.default.createElement("circle",{cx:h,cy:h,r:s.PIN.S_RADIUS,fill:r===s.PIN.TYPE_INPUT?"none":r===s.PIN.TYPE_OUTPUT?o:"red",stroke:o}),t||n||e.get("linked")?l.default.createElement("circle",{cx:h,cy:h,r:s.PIN.RADIUS,fill:"none",stroke:o}):null)}}).prototype,"onMouseDownOrTouchStart",[u.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseDownOrTouchStart"),o.prototype),p(o.prototype,"onMouseup",[u.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseup"),o.prototype),p(o.prototype,"onMouseEnter",[u.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseEnter"),o.prototype),p(o.prototype,"onMouseLeave",[u.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseLeave"),o.prototype),p(o.prototype,"onTouchEnd",[u.default],Object.getOwnPropertyDescriptor(o.prototype,"onTouchEnd"),o.prototype),p(o.prototype,"onMouseUpOrTouchEndDocument",[u.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseUpOrTouchEndDocument"),o.prototype),o);t.default=f},318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=s(n(94)),i=n(2),a=s(i),c=n(47),l=s(n(182));function s(e){return e&&e.__esModule?e:{default:e}}let u=(0,c.connect)(({blocks:e})=>({blocks:e}))(o=class extends i.Component{render(){const{props:{blocks:e,model:t}}=this,n=[];return(0,r.default)(["output","input"],o=>{const r=e.find(e=>e.get("id")===t.getIn([o,"block"])).getIn([`${o}Pins`,t.getIn([o,"pin"])]);n.push(r.get("cx"),r.get("cy"))}),a.default.createElement(l.default,{points:n})}})||o;t.default=u},319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),r=i(n(182));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(e=>{const{model:t}=e;return o.default.createElement(r.default,{points:t.points(),strokeDasharray:[5,5]})})},320:function(e,t,n){(t=e.exports=n(29)(!1)).push([e.i,'.BlockCreator__shadow_Y8igC, .BlockCreator__base_1ZSFp {\n  box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.14), 0 1px 7px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -1px rgba(0, 0, 0, 0.2); }\n\n.BlockCreator__base_1ZSFp {\n  background-color: #1e1e1e;\n  border: 1px solid #2b2b2b;\n  color: #d4d4d4;\n  width: 200px;\n  padding: 10px;\n  box-sizing: border-box;\n  font-family: Menlo, Monaco, "Courier New", monospace;\n  font-size: 12px; }\n  .BlockCreator__base_1ZSFp select {\n    display: block;\n    background-color: #2b2b2b;\n    color: inherit;\n    width: 100%;\n    border: 1px solid transparent;\n    margin-bottom: 5px;\n    font: inherit;\n    outline: none;\n    -webkit-appearance: none;\n    padding: 2px 4px; }\n    .BlockCreator__base_1ZSFp select:focus {\n      border-color: #007acc; }\n  .BlockCreator__base_1ZSFp textarea {\n    width: 100%;\n    background-color: #2b2b2b;\n    font: inherit;\n    color: inherit;\n    height: 100%;\n    box-sizing: border-box;\n    resize: vertical;\n    outline: none;\n    display: block;\n    margin-bottom: 5px;\n    border: 1px solid transparent;\n    border-radius: 0; }\n    .BlockCreator__base_1ZSFp textarea:focus {\n      border-color: #007acc; }\n  .BlockCreator__base_1ZSFp button {\n    display: inline-block;\n    background-color: #2b2b2b;\n    color: inherit;\n    border-radius: 4px;\n    font: inherit;\n    border: none;\n    outline: none;\n    cursor: pointer; }\n',""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",shadow:"BlockCreator__shadow_Y8igC",base:"BlockCreator__base_1ZSFp"}},321:function(e,t,n){var o=n(320);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TYPE_OUTPUT="OUTPUT_PIN",t.TYPE_INPUT="INPUT_PIN",t.RADIUS=7,t.S_RADIUS=4},323:function(e,t,n){(t=e.exports=n(29)(!1)).push([e.i,"\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px"}},324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE_VIEW=t.TYPE_OPERATOR=t.TYPE_PROPERTY=t.TYPE_FUNCTION=t.TYPE_VALUE=t.WIDTH=void 0;var o=i(n(190)),r=i(n(86));function i(e){return e&&e.__esModule?e:{default:e}}const{blockWidth:a}=r.default;t.WIDTH=(0,o.default)(a),t.TYPE_VALUE="VALUE_BLOCK",t.TYPE_FUNCTION="FUNCTION_BLOCK",t.TYPE_PROPERTY="PROPERTY_BLOCK",t.TYPE_OPERATOR="OPERATOR_BLCOK",t.TYPE_VIEW="VIEW_BLOCK"},343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,i=m(n(342)),a=m(n(336)),c=m(n(183)),l=m(n(90)),s=n(2),u=m(s),d=n(79),p=n(47),h=m(n(30)),f=n(48),b=n(121),_=m(n(68)),v=m(n(188));function m(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n(321);const g=[f.BLOCK.TYPE_VALUE,f.BLOCK.TYPE_FUNCTION,f.BLOCK.TYPE_PROPERTY,f.BLOCK.TYPE_OPERATOR],P=(0,l.default)(g,e=>(0,c.default)((0,a.default)(e)));let O=(0,p.connect)()((y((r=class extends s.Component{componentWillUpdate(e){const{model:t}=e,{props:{model:n}}=this;!n.get("visible")&&t.get("visible")&&(document.addEventListener("mousedown",this.onMouseDownOrTouchStartDocument),document.addEventListener("touchstart",this.onMouseDownOrTouchStartDocument))}onClick(){const{props:{model:e,dispatch:t}}=this;document.removeEventListener("mousedown",this.onMouseDownOrTouchStartDocument),document.removeEventListener("touchstart",this.onMouseDownOrTouchStartDocument),t((0,b.batchActions)([h.default.addBlock({x:e.get("x"),y:e.get("y"),value:(0,i.default)(e.get("value")),type:e.get("selected")}),h.default.updateBlockCreator({visible:!1})]))}onChangeTextarea(e){const{currentTarget:{value:t}}=e,{props:{dispatch:n}}=this;n(h.default.updateBlockCreator({value:t}))}onChangeSelect(e){const{currentTarget:{value:t}}=e,{props:{dispatch:n}}=this;n(h.default.updateBlockCreator({selected:t}))}onMouseDownOrTouchStartDocument(e){const{target:t}=e,{props:{dispatch:n}}=this,o=(0,d.findDOMNode)(this);o&&!o.contains(t)&&(n(h.default.updateBlockCreator({visible:!1})),document.removeEventListener("mousedown",this.onMouseDownOrTouchStartDocument),document.removeEventListener("touchstart",this.onMouseDownOrTouchStartDocument))}onKeyDown(e){const{keyCode:t,currentTarget:{selectionStart:n,selectionEnd:o}}=e,{props:{dispatch:r,model:i}}=this;if(9===t){e.preventDefault();const t=i.get("value");r(h.default.updateBlockCreator({value:`${t.substring(0,n)}\t${t.substring(o)}`}))}}render(){const{props:{model:e}}=this;return e.get("visible")?u.default.createElement("div",{className:"BlockCreator__base_1ZSFp",style:{position:"absolute",left:e.get("x"),top:e.get("y")}},u.default.createElement("select",{value:e.get("selected"),onChange:this.onChangeSelect},(0,l.default)(g,(e,t)=>u.default.createElement("option",{value:e,key:t},P[t]))),u.default.createElement(v.default,{onChange:this.onChangeTextarea,value:e.get("value"),spellCheck:!1,onKeyDown:this.onKeyDown}),u.default.createElement("button",{onClick:this.onClick},"ADD")):null}}).prototype,"onClick",[_.default],Object.getOwnPropertyDescriptor(r.prototype,"onClick"),r.prototype),y(r.prototype,"onChangeTextarea",[_.default],Object.getOwnPropertyDescriptor(r.prototype,"onChangeTextarea"),r.prototype),y(r.prototype,"onChangeSelect",[_.default],Object.getOwnPropertyDescriptor(r.prototype,"onChangeSelect"),r.prototype),y(r.prototype,"onMouseDownOrTouchStartDocument",[_.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseDownOrTouchStartDocument"),r.prototype),y(r.prototype,"onKeyDown",[_.default],Object.getOwnPropertyDescriptor(r.prototype,"onKeyDown"),r.prototype),o=r))||o;t.default=O},345:function(e,t,n){(t=e.exports=n(29)(!1)).push([e.i,'.Block__shadow_2-4hx, .Block__base_3ulp8 {\n  box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.14), 0 1px 7px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -1px rgba(0, 0, 0, 0.2); }\n\n.Block__base_3ulp8 {\n  font-size: 12px;\n  color: #d4d4d4;\n  border: 1px solid #2b2b2b;\n  background-color: #1e1e1e;\n  box-sizing: border-box;\n  font-family: Menlo, Monaco, "Courier New", monospace;\n  width: 200px;\n  display: flex;\n  flex-direction: column; }\n  .Block__base_3ulp8 button {\n    display: inline-block;\n    text-decoration: none;\n    color: inherit;\n    border: none;\n    font: inherit;\n    padding: 1px 8px;\n    outline: none;\n    cursor: pointer;\n    background-color: #2b2b2b;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    margin: 0; }\n    .Block__base_3ulp8 button:not(:first-of-type) {\n      margin-left: 1px; }\n  .Block__base_3ulp8 textarea {\n    width: 100%;\n    border: none;\n    background-color: #2b2b2b;\n    font: inherit;\n    color: inherit;\n    height: 100%;\n    box-sizing: border-box;\n    resize: vertical;\n    outline: none;\n    display: block;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    border-radius: 0; }\n\n.Block__textarea-div_19vCU {\n  height: calc(100% - 16px);\n  padding: 5px;\n  box-sizing: border-box; }\n\n.Block__red_1kUYK {\n  background-color: #f44336 !important; }\n',""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",shadow:"Block__shadow_2-4hx",base:"Block__base_3ulp8","textarea-div":"Block__textarea-div_19vCU",red:"Block__red_1kUYK"}},346:function(e,t,n){var o=n(345);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},389:function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(2),a=p(i),c=n(47),l=p(n(30)),s=p(n(68)),u=p(n(188)),d=n(87);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n(346),window.ontouchmove=(()=>{});let f=(0,c.connect)()((h((r=class extends i.Component{constructor(){super(),this.prevX=0,this.prevY=0}onChange(e){const{props:{model:t,dispatch:n}}=this;n(l.default.updateBlock(t.get("id"),{value:e.currentTarget.value}))}onClickDeleteButton(){const{props:{model:e,dispatch:t}}=this,n=e.get("id");t(l.default.deleteBlock(n))}onMouseDownOrTouchStart(e){const{target:{nodeName:t}}=e;if("DIV"===t){const{pageX:t,pageY:n}=(0,d.getMouseOrFirstTouchPosition)(e);this.prevX=t,this.prevY=n,document.body.classList.add("cursor-move"),document.addEventListener("mousemove",this.onMouseMoveOrTouchMoveDocument),document.addEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.addEventListener("touchmove",this.onMouseMoveOrTouchMoveDocument),document.addEventListener("touchend",this.onMouseUpOrTouchEndDocument)}}onMouseMoveOrTouchMoveDocument(e){const{pageX:t,pageY:n}=(0,d.getMouseOrFirstTouchPosition)(e),{props:{model:o,dispatch:r},prevX:i,prevY:a}=this;e.preventDefault(),r(l.default.deltaMoveBlock(o.get("id"),t-i,n-a)),this.prevX=t,this.prevY=n}onMouseUpOrTouchEndDocument(){document.body.classList.remove("cursor-move"),document.removeEventListener("mousemove",this.onMouseMoveOrTouchMoveDocument),document.removeEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.removeEventListener("touchmove",this.onMouseMoveOrTouchMoveDocument),document.removeEventListener("touchend",this.onMouseUpOrTouchEndDocument)}addPin(){const{props:{model:e,dispatch:t}}=this;t(l.default.addPin(e.get("id")))}deletePin(){const{props:{model:e,dispatch:t}}=this;t(l.default.deletePin({id:e.get("id"),removed:e.get("inputPins").size-1}))}onKeyDown(e){const{keyCode:t,currentTarget:{selectionStart:n,selectionEnd:o}}=e,{props:{dispatch:r,model:i}}=this;if(9===t){e.preventDefault();const t=i.get("value");r(l.default.updateBlock(i.get("id"),{value:`${t.substring(0,n)}\t${t.substring(o)}`}))}}render(){const{props:{model:e}}=this,t=e.get("color");return a.default.createElement("div",{className:"Block__base_3ulp8",onMouseDown:this.onMouseDownOrTouchStart,onTouchStart:this.onMouseDownOrTouchStart,style:{position:"absolute",left:e.get("x"),top:e.get("y"),height:e.get("height")}},a.default.createElement("div",null,e.get("deletable")?a.default.createElement("button",{className:"Block__red_1kUYK",onClick:this.onClickDeleteButton},"x"):null,e.get("changeable")?a.default.createElement("button",{onClick:this.addPin},"+"):null,e.get("changeable")?a.default.createElement("button",{onClick:this.deletePin},"-"):null),a.default.createElement("div",{className:"Block__textarea-div_19vCU"},a.default.createElement(u.default,{readOnly:!e.get("editable"),onChange:this.onChange,value:e.get("value"),spellCheck:!1,style:{borderLeft:`5px solid ${t}`},onKeyDown:this.onKeyDown})))}}).prototype,"onChange",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"onChange"),r.prototype),h(r.prototype,"onClickDeleteButton",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"onClickDeleteButton"),r.prototype),h(r.prototype,"onMouseDownOrTouchStart",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseDownOrTouchStart"),r.prototype),h(r.prototype,"onMouseMoveOrTouchMoveDocument",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseMoveOrTouchMoveDocument"),r.prototype),h(r.prototype,"onMouseUpOrTouchEndDocument",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseUpOrTouchEndDocument"),r.prototype),h(r.prototype,"addPin",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"addPin"),r.prototype),h(r.prototype,"deletePin",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"deletePin"),r.prototype),h(r.prototype,"onKeyDown",[s.default],Object.getOwnPropertyDescriptor(r.prototype,"onKeyDown"),r.prototype),o=r))||o;t.default=f},390:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,i=g(n(94)),a=n(2),c=g(a),l=n(47),s=g(n(389)),u=g(n(343)),d=g(n(30)),p=g(n(319)),h=g(n(318)),f=g(n(68)),b=g(n(317)),_=n(48),v=n(121),m=n(87),y=n(180);function g(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n(304),window.ontouchmove=(()=>{});let O=(0,l.connect)(({blocks:e,pointLink:t,pinLinks:n,blockCreator:o})=>({blocks:e,link:t,links:n,blockCreator:o}))((P((r=class e extends a.Component{static convertPinTypeToPinLinkKey(e){switch(e){case _.PIN.TYPE_OUTPUT:return"output";case _.PIN.TYPE_INPUT:return"input";default:throw new Error("Unknown pin type")}}componentDidMount(){window.addEventListener("message",this.onMessage)}componentWillReceiveProps(e){const{blocks:t,links:n}=e;localStorage.setItem("storedState",JSON.stringify({blocks:t.toJS(),links:n.toJS()}))}componentWillUnmount(){window.removeEventListener("message",this.onMessage)}onConnectStart(e,t,n){const{props:{dispatch:o}}=this,r=t.get("type"),i=t.get("index"),a=[d.default.startPointLink({x:t.get("cx"),y:t.get("cy")})];document.addEventListener("mousemove",this.onConnecting),document.addEventListener("mouseup",this.onConnectEnd),document.addEventListener("touchmove",this.onConnecting),document.addEventListener("touchend",this.onConnectEnd),window.__connection__={block:n,pin:i,pinType:r},r===_.PIN.TYPE_INPUT&&a.push(d.default.removePinLinkByQuery({input:{block:n,pin:i}})),o((0,v.batchActions)(a))}onConnecting(e){const{props:{dispatch:t}}=this,{clientX:n,clientY:o}=(0,m.getMouseOrFirstTouchPosition)(e);e.preventDefault(),t(d.default.endPointLink({x:n,y:o}))}onConnectEnd(){const{props:{dispatch:e}}=this;e(d.default.startPointLink({x:0,y:0})),document.removeEventListener("mousemove",this.onConnecting),document.removeEventListener("mouseup",this.onConnectEnd),document.removeEventListener("touchmove",this.onConnecting),document.removeEventListener("touchend",this.onConnectEnd)}onConnectPin(t,n,o){const{__connection__:{block:r,pin:i,pinType:a}}=window,{props:{dispatch:c}}=this,l=n.get("index"),s=n.get("type");r!==o&&a!==s&&c(d.default.addPinLink({[e.convertPinTypeToPinLinkKey(a)]:{block:r,pin:i},[e.convertPinTypeToPinLinkKey(s)]:{block:o,pin:l}}))}onMessage(e){const{props:{dispatch:t}}=this,{data:{type:n,value:o}}=e;"chain-result"===n?t(d.default.pushViewBlock(JSON.stringify(o))):"chain-error"===n?y.toast.error(o,{position:y.toast.POSITION.BOTTOM_RIGHT}):"chain-clear"===n&&t(d.default.clearViewBlock())}onMouseDownOrTouchStart(e){const{target:t,currentTarget:n}=e,{clientX:o,clientY:r}=(0,m.getMouseOrFirstTouchPosition)(e),{props:{dispatch:i}}=this;t===n&&i(d.default.showBlockCreator({x:o,y:r}))}render(){const{props:{link:e,links:t,blockCreator:n}}=this;let{props:{blocks:o}}=this;return c.default.createElement("div",{className:"Chain__base_L0Lag"},c.default.createElement("svg",{onMouseDown:this.onMouseDownOrTouchStart,onTouchStart:this.onMouseDownOrTouchStart},t.map((e,t)=>((0,i.default)(["input","output"],t=>{const n=o.findIndex(n=>n.get("id")===e.getIn([t,"block"]));o=o.setIn([n,`${t}Pins`,e.getIn([t,"pin"]),"linked"],!0)}),c.default.createElement(h.default,{key:t,model:e}))),c.default.createElement(p.default,{model:e})),o.map(e=>{const t=e.get("id");return[c.default.createElement(s.default,{key:t,model:e}),e.get("inputPins").map(e=>c.default.createElement(b.default,{key:e.get("index"),model:e,parent:t,onMouseDownOrTouchStart:this.onConnectStart,onMouseUpOrTouchEnd:this.onConnectPin})),e.get("outputPins").map(e=>c.default.createElement(b.default,{key:e.get("index"),model:e,parent:t,onMouseDownOrTouchStart:this.onConnectStart,onMouseUpOrTouchEnd:this.onConnectPin}))]}),c.default.createElement(u.default,{model:n}))}}).prototype,"onConnectStart",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnectStart"),r.prototype),P(r.prototype,"onConnecting",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnecting"),r.prototype),P(r.prototype,"onConnectEnd",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnectEnd"),r.prototype),P(r.prototype,"onConnectPin",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnectPin"),r.prototype),P(r.prototype,"onMessage",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onMessage"),r.prototype),P(r.prototype,"onMouseDownOrTouchStart",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseDownOrTouchStart"),r.prototype),o=r))||o;t.default=O},459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=O(n(221)),r=O(n(94)),i=O(n(90)),a=n(2),c=O(a),l=n(47),s=O(n(390)),u=n(173),d=O(n(302)),p=n(121),h=n(265),f=O(n(290)),b=O(n(286)),_=n(74),v=O(n(30)),m=n(180),y=n(83),g=n(48),P=O(n(271));function O(e){return e&&e.__esModule?e:{default:e}}const{link:E,active:k}=P.default,T=(0,u.createStore)((0,p.enableBatching)(d.default)),w=JSON.parse(localStorage.getItem("storedState"));if(w){const{blocks:e,links:t}=w,{length:n}=e;n>0?T.dispatch((0,p.batchActions)([...(0,i.default)(e,e=>((0,r.default)(["inputPins","outputPins"],t=>{(0,o.default)(e,t)&&(e[t]=(0,y.List)((0,i.default)(e[t],e=>new _.Pin(e))))}),v.default.addBlock(e))),...(0,i.default)(t,e=>v.default.addPinLink(e))])):T.dispatch(v.default.addBlock({x:100,y:100,type:g.BLOCK.TYPE_VIEW}))}else T.dispatch(v.default.addBlock({x:100,y:100,type:g.BLOCK.TYPE_VIEW}));const M=()=>c.default.createElement(h.Redirect,{to:"/chain"});t.default=class extends a.Component{render(){return c.default.createElement(l.Provider,{store:T},c.default.createElement(h.HashRouter,null,c.default.createElement("div",{className:"App__wrap_1SQHV"},c.default.createElement("div",{className:"App__base_2Rw2G"},c.default.createElement(f.default,null),c.default.createElement(h.Route,{exact:!0,path:"/",render:M}),c.default.createElement(h.Route,{path:"/chain",component:s.default}),c.default.createElement(h.Route,{path:"/editor",component:b.default})),c.default.createElement("footer",null,c.default.createElement(h.NavLink,{to:"/chain",className:E,activeClassName:k},c.default.createElement("span",null,"Chain")),c.default.createElement(h.NavLink,{to:"/editor",className:E,activeClassName:k},c.default.createElement("span",null,"Editor")),c.default.createElement(h.NavLink,{to:"/view",className:E,activeClassName:k},c.default.createElement("span",null,"View"))),c.default.createElement(m.ToastContainer,{autoClose:3e3}))))}}},468:function(e,t,n){"use strict";var o=a(n(2)),r=n(79),i=a(n(459));function a(e){return e&&e.__esModule?e:{default:e}}n(269),n(267),(0,r.render)(o.default.createElement(i.default,null),document.querySelector("main"))},48:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PIN=t.BLOCK=void 0;var o=i(n(324)),r=i(n(322));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.BLOCK=o,t.PIN=r},671:function(e,t,n){n(670),e.exports=n(468)},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PinLink=t.PointLink=t.BlockCreator=t.Pin=t.Block=void 0;var o=h(n(300)),r=h(n(23)),i=h(n(181)),a=h(n(221)),c=h(n(94)),l=h(n(90)),s=h(n(296)),u=n(83),d=n(48),p=h(n(86));function h(e){return e&&e.__esModule?e:{default:e}}const{white0:f,purple0:b,blue1:_,yellow0:v}=p.default;t.Block=class e extends((0,u.Record)({id:0,value:"",x:0,y:0,deletable:!0,editable:!0,type:"",color:f,changeable:!0,outputPins:(0,u.List)(),inputPins:(0,u.List)(),height:70})){constructor(e){super(e);const{type:t}=this;let n=null;switch(t){case d.BLOCK.TYPE_VIEW:n={editable:!1,deletable:!1,color:b,inputPins:this._createPins([f],d.PIN.TYPE_INPUT)};break;case d.BLOCK.TYPE_VALUE:n={changeable:!1,outputPins:this._createPins([b],d.PIN.TYPE_OUTPUT)};break;case d.BLOCK.TYPE_FUNCTION:n={color:_,inputPins:this._createPins([_],d.PIN.TYPE_INPUT),outputPins:this._createPins([b],d.PIN.TYPE_OUTPUT)};break;case d.BLOCK.TYPE_PROPERTY:n={changeable:!1,color:v,inputPins:this._createPins([f],d.PIN.TYPE_INPUT),outputPins:this._createPins([f],d.PIN.TYPE_OUTPUT)};break;case d.BLOCK.TYPE_OPERATOR:n={changeable:!1,inputPins:this._createPins([f,f],d.PIN.TYPE_INPUT),outputPins:this._createPins([f],d.PIN.TYPE_OUTPUT)};break;default:throw new Error(`Unknown type: ${t}.`)}return this.merge(n).recalculateHeight()}recalculateHeight(){const{inputPins:{size:e},outputPins:{size:t}}=this;return this.set("height",Math.max(4,e+1,t+1)*(2*d.PIN.RADIUS+3)-1)}dmove(e,t){const{x:n,y:o,inputPins:r,outputPins:i}=this;return this.merge({x:n+e,y:o+t,inputPins:r.map(n=>n.dmove(e,t)),outputPins:i.map(n=>n.dmove(e,t))})}createPin(t,n,o=null){const{x:r,y:i}=this,a=e.convertPinTypeToPinKey(n),{size:c}=this.get(a),l=(0,s.default)(o)?c:o,[u,d]=e._pinPosition(l,n);return new m({index:l,color:t,type:n,cx:r+u,cy:i+d})}_createPins(t,n){const o=this.get(e.convertPinTypeToPinKey(n));return 0===o.size?(0,u.List)((0,l.default)(t,(e,t)=>this.createPin(e,n,t))):o}static convertPinTypeToPinKey(e){switch(e){case d.PIN.TYPE_OUTPUT:return"outputPins";case d.PIN.TYPE_INPUT:return"inputPins";default:throw new Error("Unknown pin type")}}static _pinPosition(e,t){return[t===d.PIN.TYPE_INPUT?-d.PIN.RADIUS-2:t===d.PIN.TYPE_OUTPUT?d.BLOCK.WIDTH+d.PIN.RADIUS:0,d.PIN.RADIUS+(2*d.PIN.RADIUS+3)*e+1]}};let m=t.Pin=class extends((0,u.Record)({index:0,color:f,type:"",linked:!1,cx:0,cy:0})){dmove(e,t){const{cx:n,cy:o}=this;return this.merge({cx:n+e,cy:o+t})}};t.BlockCreator=class extends((0,u.Record)({x:0,y:0,visible:!1,value:"",selected:d.BLOCK.TYPE_VALUE})){show(e,t){return this.merge({visible:!0,x:e,y:t,value:"",selected:d.BLOCK.TYPE_VALUE})}},t.PointLink=class extends((0,u.Record)({ax:0,ay:0,bx:0,by:0})){start(e,t){return this.merge({ax:e,ay:t,bx:e,by:t})}end(e,t){return this.merge({bx:e,by:t})}points(){const{ax:e,ay:t,bx:n,by:o}=this;return[e,t,n,o]}},t.PinLink=class e extends((0,u.Record)({output:(0,u.Map)({block:0,pin:0}),input:(0,u.Map)({block:0,pin:0})})){constructor(e){(0,c.default)(["output","input"],t=>{(0,a.default)(e,t)&&(e[t]=(0,u.Map)(e[t]))}),super(e)}hasBlock(e){return(0,i.default)(["output","input"],t=>this.getIn([t,"block"])===e)}match({output:t,input:n}){return e._matcher(this.get("output"),t)&&e._matcher(this.get("input"),n)}static _matcher(t,n){return(0,r.default)(n)?!(0,i.default)((0,o.default)(n),([n,o])=>!e._matcher(t.get(n),o)):void 0!==t&&(void 0===n||t===n)}}},86:function(e,t,n){var o=n(323);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(28)(o,r);o.locals&&(e.exports=o.locals)},87:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generator=t.getMouseOrFirstTouchPosition=t.cosineCurvePoints=t.dist=void 0;var o=i(n(190)),r=i(n(371));function i(e){return e&&e.__esModule?e:{default:e}}const a=t.dist=((e,t,n,o)=>Math.sqrt(Math.pow(e-n,2)+Math.pow(t-o,2)));t.cosineCurvePoints=((e,t,n,o,r=10)=>{const i=a(e,t,n,o);if(0===i)return[];const c=(n-e)/i,l=o-t,s=[];for(let u=0;u<=i;u+=1){const d=e+c*u,p=t+l*(1-Math.cos(Math.PI/i*u))/2;r<a(e,t,d,p)&&r<a(n,o,d,p)&&s.push(d,p)}return s}),t.getMouseOrFirstTouchPosition=(e=>{const{type:t,changedTouches:n}=e;if((0,r.default)(["mousedown","mousemove","mouseup"],t))return e;if((0,r.default)(["touchstart","touchmove","touchend"],t))return n.item(0);throw new Error("Unknown event type")}),t.generator=new class e{static get ZEROS_42(){return"000000000000000000000000000000000000000000"}static get ZEROS_12(){return"000000000000"}constructor(){this.sequence=0,this.ptime=0}id(){const t=Date.now();t===this.ptime?this.sequence+=1:this.sequence=0;const n=(e.ZEROS_42+(t-1288834974657).toString(2)).slice(-42),r=(e.ZEROS_12+this.sequence.toString(2)).slice(-12);return(0,o.default)(`${n}${r}`,2)}}}});