!function(e){function t(t){for(var o,a,c=t[0],s=t[1],l=t[2],d=0,p=[];d<c.length;d++)a=c[d],r[a]&&p.push(r[a][0]),r[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},r={1:0};var i=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="http://localhost:3000/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([449,0]),n()}({136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(2)),r=n(73),i=a(n(94));function a(e){return e&&e.__esModule?e:{default:e}}const{white0:c}=i.default;t.default=(e=>{const{points:t,strokeDasharray:n}=e;return o.default.createElement("polyline",{points:(0,r.cosineCurvePoints)(...t),fill:"none",stroke:c,strokeWidth:3,strokeDasharray:n})})},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(2),a=u(i),c=u(n(66)),s=u(n(25)),l=u(n(60));function u(e){return e&&e.__esModule?e:{default:e}}let d=(p=(o=class extends i.Component{constructor(){super(),this.tab=!1,this.selectionStart=-1}componentDidUpdate(){const{selectionStart:e}=this;if(-1<e){const t=e+1;c.default.findDOMNode(this).setSelectionRange(t,t)}this.selectionStart=-1}onKeyDown(...e){const{props:{onKeyDown:t}}=this,{keyCode:n,currentTarget:{selectionStart:o}}=e[0];9===n&&(this.selectionStart=o),"function"==typeof t&&t(...e)}render(){const{props:e}=this,t=s.default.cloneDeep(e);return delete t.onKeyDown,a.default.createElement("textarea",r({},t,{onKeyDown:this.onKeyDown}))}}).prototype,h="onKeyDown",f=[l.default],b=Object.getOwnPropertyDescriptor(o.prototype,"onKeyDown"),m=o.prototype,v={},Object.keys(b).forEach(function(e){v[e]=b[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=f.slice().reverse().reduce(function(e,t){return t(p,h,e)||e},v),m&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(m):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(p,h,v),v=null),o);var p,h,f,b,m,v;t.default=d},183:function(e,t,n){(t=e.exports=n(36)(!1)).push([e.i,"html,\nbody,\nmain {\n  width: 100%;\n  height: 100%; }\n\nbody {\n  margin: 0;\n  font-family: sans-serif; }\n  body.index__cursor-move_3IF2O * {\n    cursor: move; }\n\n.ReactCodeMirror {\n  height: 100%; }\n\n.CodeMirror {\n  height: 100%; }\n",""]),t.locals={"cursor-move":"index__cursor-move_3IF2O"}},184:function(e,t,n){var o=n(183);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(o,r);o.locals&&(e.exports=o.locals)},185:function(e,t,n){(t=e.exports=n(36)(!1)).push([e.i,"body {\n  box-sizing: border-box; }\n\n.App__wrap_1SQHV {\n  width: 100%;\n  height: 100%;\n  background-color: #1e1e1e; }\n  .App__wrap_1SQHV footer {\n    position: fixed;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    border-top: 1px solid #2b2b2b;\n    color: #d4d4d4;\n    background-color: #1e1e1e; }\n\n.App__base_2Rw2G {\n  width: 100%;\n  height: calc(100% - 36px); }\n\n.App__link_36M0v {\n  font-weight: 100;\n  padding: 5px 10px;\n  color: #555555;\n  display: inline-block;\n  text-decoration: none; }\n  .App__link_36M0v > span {\n    padding: 3px 6px;\n    display: inline-block;\n    border-bottom: 1px transparent solid; }\n\n.App__active_3QbdL {\n  color: #d4d4d4; }\n  .App__active_3QbdL > span {\n    border-bottom-color: #007acc; }\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",wrap:"App__wrap_1SQHV",base:"App__base_2Rw2G",link:"App__link_36M0v",active:"App__active_3QbdL"}},186:function(e,t,n){var o=n(185);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(o,r);o.locals&&(e.exports=o.locals)},201:function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(2),a=d(i),c=n(43),s=d(n(26)),l=d(n(200));n(195),n(193),n(191),n(187);var u=d(n(60));function d(e){return e&&e.__esModule?e:{default:e}}let p=(0,c.connect)(({htmlEditor:e})=>({code:e}))((h=(r=class extends i.Component{onChange(e){const{props:{dispatch:t}}=this;t(s.default.onChangeHtml(e))}render(){const{props:{code:e}}=this;return a.default.createElement(l.default,{value:e,onChange:this.onChange,options:{mode:"htmlmixed",theme:"monokai",styleActiveLine:!0,lineNumbers:!0}})}}).prototype,f="onChange",b=[u.default],m=Object.getOwnPropertyDescriptor(r.prototype,"onChange"),v=r.prototype,_={},Object.keys(m).forEach(function(e){_[e]=m[e]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=b.slice().reverse().reduce(function(e,t){return t(h,f,e)||e},_),v&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(v):void 0,_.initializer=void 0),void 0===_.initializer&&(Object.defineProperty(h,f,_),_=null),o=r))||o;var h,f,b,m,v,_;t.default=p},202:function(e,t,n){(t=e.exports=n(36)(!1)).push([e.i,".HTMLRenderer__base_y4ZXu {\n  display: block;\n  width: 100%;\n  height: 100%;\n  border: none;\n  background-color: white;\n  position: absolute;\n  left: 0;\n  top: 0; }\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",base:"HTMLRenderer__base_y4ZXu"}},203:function(e,t,n){var o=n(202);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(o,r);o.locals&&(e.exports=o.locals)},204:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2),i=l(r),a=n(43),c=l(n(25)),s=n(34);function l(e){return e&&e.__esModule?e:{default:e}}n(203);const u=new DOMParser;let d=(0,a.connect)(({blocks:e,pinLinks:t,htmlEditor:n})=>({blocks:e,links:t,html:n}))(o=class extends r.Component{toEvalableString(){const{props:{blocks:e}}=this,t=e.first();return t?this.toEvalableStringSub(t.get("id")):null}toEvalableStringSub(e){if(null===e)return"null";const{props:{blocks:t}}=this,n=t.find(t=>t.get("id")===e),o=n.get("inputPins").map(t=>this.toEvalableStringSub(this.findOutputBlockIdFromLinks({input:{block:e,pin:t.get("index")}}))).toJS();switch(n.get("type")){case s.BlockCreator.VIEW_BLOCK:return o;case s.BlockCreator.CREATABLE_TYPES.VALUE_BLOCK:return n.get("value");case s.BlockCreator.CREATABLE_TYPES.FUNCTION_BLOCK:const[e,...t]=o,r=`(${c.default.join(t,", ")})`;return e?`${e}[${JSON.stringify(n.get("value"))}]${r}`:`${n.get("value")}${r}`;case s.BlockCreator.CREATABLE_TYPES.PROPERTY_BLOCK:return`${o[0]}[${JSON.stringify(n.get("value"))}]`;case s.BlockCreator.CREATABLE_TYPES.OPERATOR_BLCOK:return`(${o[0]}${n.get("value")}${o[1]})`;default:return'"UNKNOWN_BLOCK"'}}findOutputBlockIdFromLinks(e){const{props:{links:t}}=this;let n=null;return t.some(t=>!!t.match(e)&&(n=t.getIn(["output","block"]),!0)),n}render(){const{props:{html:e}}=this,t=u.parseFromString(e,"text/html"),n=t.querySelector("body"),o=document.createElement("script"),r=c.default.join(c.default.map(this.toEvalableString(),e=>`parent.postMessage({ type: 'chain-result', value: ${e} }, '*')`),"\n");return o.innerHTML=`\n\t\t\tparent.postMessage({ type: 'chain-clear' }, '*');\n\t\t\ttry {\n\t\t\t\t(0, eval)(${JSON.stringify(r)});\n\t\t\t} catch (err) {\n\t\t\t\tparent.postMessage({ type: 'chain-error', value: String(err) }, '*');\n\t\t\t}\n\t\t`,n.appendChild(o),i.default.createElement("iframe",{srcDoc:`<!doctype html>${t.documentElement.outerHTML}`,className:"HTMLRenderer__base_y4ZXu"})}})||o;t.default=d},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(58),i=n(26),a=(o=i)&&o.__esModule?o:{default:o};t.default=(0,r.handleActions)({[a.default.onChangeHtml]:(e,t)=>{const{payload:n}=t;return n}},'<!doctype html>\n<html>\n<head>\n\t<meta charset="utf-8" />\n</head>\n<body>\n\t<h1>Hello, World!</h1>\n</body>\n</html>\n')},207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(72),i=n(34),a=n(58),c=n(26),s=(o=c)&&o.__esModule?o:{default:o};t.default=(0,a.handleActions)({[s.default.addPinLink]:(e,t)=>{const{payload:n}=t,o={input:n.input};return e.filter(e=>!e.match(o)).push(new i.PinLink(n))},[s.default.deleteBlock]:(e,t)=>{const{payload:n}=t;return e.filter(e=>!e.hasBlock(n))},[s.default.removePinLinkByQuery]:(e,t)=>{const{payload:n}=t;return e.filter(e=>!e.match(n))},[s.default.deletePin]:(e,t)=>{const{payload:{id:n,removed:o}}=t;return 0===o?e:e.filter(e=>!e.match({input:{block:n,pin:o}}))}},(0,r.List)())},208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(34),i=n(58),a=n(26),c=(o=a)&&o.__esModule?o:{default:o};t.default=(0,i.handleActions)({[c.default.startPointLink]:(e,t)=>{const{payload:{x:n,y:o}}=t;return e.start(n,o)},[c.default.endPointLink]:(e,t)=>{const{payload:{x:n,y:o}}=t;return e.end(n,o)}},new r.PointLink)},209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(34),i=n(58),a=n(26),c=(o=a)&&o.__esModule?o:{default:o};t.default=(0,i.handleActions)({[c.default.updateBlockCreator]:(e,t)=>{const{payload:n}=t;return e.merge(n)},[c.default.showBlockCreator]:(e,t)=>{const{payload:{x:n,y:o}}=t;return e.show(n,o)}},new r.BlockCreator)},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(72),r=n(34),i=n(58),a=s(n(26)),c=s(n(94));function s(e){return e&&e.__esModule?e:{default:e}}const{blue2:l,white0:u}=c.default;t.default=(0,i.handleActions)({[a.default.addBlock]:(e,t)=>{const{payload:n}=t;return e.push(new r.Block(n))},[a.default.updateBlock]:(e,t)=>{const{payload:{id:n,patch:o}}=t,r=e.findIndex(e=>e.get("id")===n);return e.update(r,e=>e.merge(o))},[a.default.deleteBlock]:(e,t)=>{const{payload:n}=t,o=e.findIndex(e=>e.get("id")===n);return e.filter((e,t)=>t!==o)},[a.default.deltaMoveBlock]:(e,t)=>{const{payload:{id:n,dx:o,dy:r}}=t,i=e.findIndex(e=>e.get("id")===n);return e.update(i,e=>e.dmove(o,r))},[a.default.addPin]:(e,t)=>{const{payload:n}=t,o=e.findIndex(e=>e.get("id")===n);return e.update(o,e=>e.updateIn(["inputPins"],t=>t.push(e.createPin(e.type===r.BlockCreator.CREATABLE_TYPES.FUNCTION_BLOCK?l:u,r.Pin.INPUT))).recalculateHeight())},[a.default.deletePin]:(e,t)=>{const{payload:{id:n}}=t,o=e.findIndex(e=>e.get("id")===n);return e.update(o,e=>e.updateIn(["inputPins"],e=>e.slice(0,Math.max(1,e.size-1))).recalculateHeight())},[a.default.clearViewBlock]:e=>e.update(0,e=>e.set("value","")),[a.default.pushViewBlock]:(e,t)=>{const{payload:n}=t;return e.update(0,e=>{const t=e.get("value");return e.set("value",t?`${t}\n${n}`:n)})}},(0,o.List)())},211:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(128),r=l(n(210)),i=l(n(209)),a=l(n(208)),c=l(n(207)),s=l(n(206));function l(e){return e&&e.__esModule?e:{default:e}}t.default=(0,o.combineReducers)({blocks:r.default,blockCreator:i.default,pointLink:a.default,pinLinks:c.default,htmlEditor:s.default})},212:function(e,t,n){(t=e.exports=n(36)(!1)).push([e.i,".Chain__base_L0Lag {\n  background-color: #1e1e1e;\n  position: relative;\n  width: 100%;\n  height: 100%; }\n  .Chain__base_L0Lag > svg {\n    display: block;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0; }\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",base:"Chain__base_L0Lag"}},213:function(e,t,n){var o=n(212);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(o,r);o.locals&&(e.exports=o.locals)},223:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2),i=l(r),a=n(34),c=l(n(60)),s=l(n(25));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}const d=a.Pin.RADIUS+1;let p=(u((o=class extends r.Component{constructor(){super(),this.state={enter:!1,connecting:!1}}onMouseDownOrTouchStart(e){const{props:{model:t,parent:n,onMouseDownOrTouchStart:o}}=this;o(e,t,n),document.addEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.addEventListener("touchend",this.onMouseUpOrTouchEndDocument),this.setState({connecting:!0})}onMouseup(e){const{props:{model:t,onMouseUpOrTouchEnd:n,parent:o}}=this;n(e,t,o)}onMouseEnter(){this.setState({enter:!0})}onMouseLeave(){this.setState({enter:!1})}onTouchEnd(e){const{pageX:t,pageY:n}=e.changedTouches.item(0);s.default.some(document.querySelectorAll("[data-pin]"),o=>{const{left:r,top:i,width:a,height:c}=o.getBoundingClientRect();return r<=t&&t<=r+a&&i<=n&&n<=i+c&&(s.default.some(s.default.keys(o),t=>{if(s.default.startsWith(t,"__reactInternalInstance$")){const{_currentElement:{_owner:{_currentElement:{props:{model:n,onMouseUpOrTouchEnd:r,parent:i}}}}}=o[t];return r(e,n,i),!0}return!1}),!0)})}onMouseUpOrTouchEndDocument(){document.removeEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.removeEventListener("touchend",this.onMouseUpOrTouchEndDocument),this.setState({connecting:!1})}render(){const{props:{model:e},state:{enter:t,connecting:n}}=this,o=e.get("color"),r=e.get("type");return i.default.createElement("svg",{"data-pin":!0,onMouseDown:this.onMouseDownOrTouchStart,onTouchStart:this.onMouseDownOrTouchStart,onMouseUp:this.onMouseup,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:this.onTouchEnd,style:{position:"absolute",left:e.get("cx")-d,top:e.get("cy")-d,width:2*a.Pin.RADIUS+2,height:2*a.Pin.RADIUS+2,cursor:"pointer"}},i.default.createElement("circle",{cx:d,cy:d,r:a.Pin.S_RADIUS,fill:r===a.Pin.INPUT?"none":r===a.Pin.OUTPUT?o:"red",stroke:o}),t||n||e.get("linked")?i.default.createElement("circle",{cx:d,cy:d,r:a.Pin.RADIUS,fill:"none",stroke:o}):null)}}).prototype,"onMouseDownOrTouchStart",[c.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseDownOrTouchStart"),o.prototype),u(o.prototype,"onMouseup",[c.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseup"),o.prototype),u(o.prototype,"onMouseEnter",[c.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseEnter"),o.prototype),u(o.prototype,"onMouseLeave",[c.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseLeave"),o.prototype),u(o.prototype,"onTouchEnd",[c.default],Object.getOwnPropertyDescriptor(o.prototype,"onTouchEnd"),o.prototype),u(o.prototype,"onMouseUpOrTouchEndDocument",[c.default],Object.getOwnPropertyDescriptor(o.prototype,"onMouseUpOrTouchEndDocument"),o.prototype),o);t.default=p},224:function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2),i=l(r),a=n(43),c=l(n(136)),s=l(n(25));function l(e){return e&&e.__esModule?e:{default:e}}let u=(0,a.connect)(({blocks:e})=>({blocks:e}))(o=class extends r.Component{render(){const{props:{blocks:e,model:t}}=this,n=[];return s.default.forEach(["output","input"],o=>{const r=e.find(e=>e.get("id")===t.getIn([o,"block"])).getIn([`${o}Pins`,t.getIn([o,"pin"])]);n.push(r.get("cx"),r.get("cy"))}),i.default.createElement(c.default,{points:n})}})||o;t.default=u},225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(2)),r=i(n(136));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(e=>{const{model:t}=e;return o.default.createElement(r.default,{points:t.points(),strokeDasharray:[5,5]})})},226:function(e,t,n){(t=e.exports=n(36)(!1)).push([e.i,'.BlockCreator__shadow_Y8igC, .BlockCreator__base_1ZSFp {\n  box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.14), 0 1px 7px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -1px rgba(0, 0, 0, 0.2); }\n\n.BlockCreator__base_1ZSFp {\n  background-color: #1e1e1e;\n  border: 1px solid #2b2b2b;\n  color: #d4d4d4;\n  width: 200px;\n  padding: 10px;\n  box-sizing: border-box;\n  font-family: Menlo, Monaco, "Courier New", monospace;\n  font-size: 12px; }\n  .BlockCreator__base_1ZSFp select {\n    display: block;\n    background-color: #2b2b2b;\n    color: inherit;\n    width: 100%;\n    border: 1px solid transparent;\n    margin-bottom: 5px;\n    font: inherit;\n    outline: none;\n    -webkit-appearance: none;\n    padding: 2px 4px; }\n    .BlockCreator__base_1ZSFp select:focus {\n      border-color: #007acc; }\n  .BlockCreator__base_1ZSFp textarea {\n    width: 100%;\n    background-color: #2b2b2b;\n    font: inherit;\n    color: inherit;\n    height: 100%;\n    box-sizing: border-box;\n    resize: vertical;\n    outline: none;\n    display: block;\n    margin-bottom: 5px;\n    border: 1px solid transparent;\n    border-radius: 0; }\n    .BlockCreator__base_1ZSFp textarea:focus {\n      border-color: #007acc; }\n  .BlockCreator__base_1ZSFp button {\n    display: inline-block;\n    background-color: #2b2b2b;\n    color: inherit;\n    border-radius: 4px;\n    font: inherit;\n    border: none;\n    outline: none;\n    cursor: pointer; }\n',""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",shadow:"BlockCreator__shadow_Y8igC",base:"BlockCreator__base_1ZSFp"}},227:function(e,t,n){var o=n(226);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(o,r);o.locals&&(e.exports=o.locals)},228:function(e,t,n){(t=e.exports=n(36)(!1)).push([e.i,"\n",""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px"}},229:function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(2),a=b(i),c=n(66),s=n(43),l=b(n(25)),u=b(n(26)),d=n(34),p=n(93),h=b(n(60)),f=b(n(137));function b(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n(227);const{CREATABLE_TYPE_KEYS:v}=d.BlockCreator,_=l.default.map(v,e=>l.default.upperFirst(l.default.camelCase(e)));let y=(0,s.connect)()((m((r=class extends i.Component{componentWillUpdate(e){const{model:t}=e,{props:{model:n}}=this;!n.get("visible")&&t.get("visible")&&(document.addEventListener("mousedown",this.onMouseDownOrTouchStartDocument),document.addEventListener("touchstart",this.onMouseDownOrTouchStartDocument))}onClick(){const{props:{model:e,dispatch:t}}=this;document.removeEventListener("mousedown",this.onMouseDownOrTouchStartDocument),document.removeEventListener("touchstart",this.onMouseDownOrTouchStartDocument),t((0,p.batchActions)([u.default.addBlock({x:e.get("x"),y:e.get("y"),value:l.default.trim(e.get("value")),type:e.get("selected")}),u.default.updateBlockCreator({visible:!1})]))}onChangeTextarea(e){const{currentTarget:{value:t}}=e,{props:{dispatch:n}}=this;n(u.default.updateBlockCreator({value:t}))}onChangeSelect(e){const{currentTarget:{value:t}}=e,{props:{dispatch:n}}=this;n(u.default.updateBlockCreator({selected:t}))}onMouseDownOrTouchStartDocument(e){const{target:t}=e,{props:{dispatch:n}}=this,o=(0,c.findDOMNode)(this);o&&!o.contains(t)&&(n(u.default.updateBlockCreator({visible:!1})),document.removeEventListener("mousedown",this.onMouseDownOrTouchStartDocument),document.removeEventListener("touchstart",this.onMouseDownOrTouchStartDocument))}onKeyDown(e){const{keyCode:t,currentTarget:{selectionStart:n,selectionEnd:o}}=e,{props:{dispatch:r,model:i}}=this;if(9===t){e.preventDefault();const t=i.get("value");r(u.default.updateBlockCreator({value:`${t.substring(0,n)}\t${t.substring(o)}`}))}}render(){const{props:{model:e}}=this;return e.get("visible")?a.default.createElement("div",{className:"BlockCreator__base_1ZSFp",style:{position:"absolute",left:e.get("x"),top:e.get("y")}},a.default.createElement("select",{value:e.get("selected"),onChange:this.onChangeSelect},l.default.map(v,(e,t)=>a.default.createElement("option",{value:e,key:t},_[t]))),a.default.createElement(f.default,{onChange:this.onChangeTextarea,value:e.get("value"),spellCheck:!1,onKeyDown:this.onKeyDown}),a.default.createElement("button",{onClick:this.onClick},"ADD")):null}}).prototype,"onClick",[h.default],Object.getOwnPropertyDescriptor(r.prototype,"onClick"),r.prototype),m(r.prototype,"onChangeTextarea",[h.default],Object.getOwnPropertyDescriptor(r.prototype,"onChangeTextarea"),r.prototype),m(r.prototype,"onChangeSelect",[h.default],Object.getOwnPropertyDescriptor(r.prototype,"onChangeSelect"),r.prototype),m(r.prototype,"onMouseDownOrTouchStartDocument",[h.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseDownOrTouchStartDocument"),r.prototype),m(r.prototype,"onKeyDown",[h.default],Object.getOwnPropertyDescriptor(r.prototype,"onKeyDown"),r.prototype),o=r))||o;t.default=y},231:function(e,t,n){(t=e.exports=n(36)(!1)).push([e.i,'.Block__shadow_2-4hx, .Block__base_3ulp8 {\n  box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.14), 0 1px 7px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -1px rgba(0, 0, 0, 0.2); }\n\n.Block__base_3ulp8 {\n  font-size: 12px;\n  color: #d4d4d4;\n  border: 1px solid #2b2b2b;\n  background-color: #1e1e1e;\n  box-sizing: border-box;\n  font-family: Menlo, Monaco, "Courier New", monospace;\n  width: 200px;\n  display: flex;\n  flex-direction: column; }\n  .Block__base_3ulp8 button {\n    display: inline-block;\n    text-decoration: none;\n    color: inherit;\n    border: none;\n    font: inherit;\n    padding: 1px 8px;\n    outline: none;\n    cursor: pointer;\n    background-color: #2b2b2b;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    margin: 0; }\n    .Block__base_3ulp8 button:not(:first-of-type) {\n      margin-left: 1px; }\n  .Block__base_3ulp8 textarea {\n    width: 100%;\n    border: none;\n    background-color: #2b2b2b;\n    font: inherit;\n    color: inherit;\n    height: 100%;\n    box-sizing: border-box;\n    resize: vertical;\n    outline: none;\n    display: block;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    border-radius: 0; }\n\n.Block__textarea-div_19vCU {\n  height: calc(100% - 16px);\n  padding: 5px;\n  box-sizing: border-box; }\n\n.Block__red_1kUYK {\n  background-color: #f44336 !important; }\n',""]),t.locals={black0:"#1e1e1e",black1:"#2b2b2b",white0:"#d4d4d4",red0:"#f44336",purple0:"#c586c0",blue0:"#007acc",blue1:"#569cd6",blue2:"#9cdcfe",yellow0:"#dcdcaa",blockWidth:"200px",shadow:"Block__shadow_2-4hx",base:"Block__base_3ulp8","textarea-div":"Block__textarea-div_19vCU",red:"Block__red_1kUYK"}},232:function(e,t,n){var o=n(231);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(o,r);o.locals&&(e.exports=o.locals)},233:function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(2),a=p(i),c=n(43),s=p(n(26)),l=p(n(60)),u=p(n(137)),d=n(73);function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n(232),window.ontouchmove=(()=>{});let f=(0,c.connect)()((h((r=class extends i.Component{constructor(){super(),this.prevX=0,this.prevY=0}onChange(e){const{props:{model:t,dispatch:n}}=this;n(s.default.updateBlock(t.get("id"),{value:e.currentTarget.value}))}onClickDeleteButton(){const{props:{model:e,dispatch:t}}=this,n=e.get("id");t(s.default.deleteBlock(n))}onMouseDownOrTouchStart(e){const{target:{nodeName:t}}=e;if("DIV"===t){const{pageX:t,pageY:n}=(0,d.getMouseOrFirstTouchPosition)(e);this.prevX=t,this.prevY=n,document.body.classList.add("cursor-move"),document.addEventListener("mousemove",this.onMouseMoveOrTouchMoveDocument),document.addEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.addEventListener("touchmove",this.onMouseMoveOrTouchMoveDocument),document.addEventListener("touchend",this.onMouseUpOrTouchEndDocument)}}onMouseMoveOrTouchMoveDocument(e){const{pageX:t,pageY:n}=(0,d.getMouseOrFirstTouchPosition)(e),{props:{model:o,dispatch:r},prevX:i,prevY:a}=this;e.preventDefault(),r(s.default.deltaMoveBlock(o.get("id"),t-i,n-a)),this.prevX=t,this.prevY=n}onMouseUpOrTouchEndDocument(){document.body.classList.remove("cursor-move"),document.removeEventListener("mousemove",this.onMouseMoveOrTouchMoveDocument),document.removeEventListener("mouseup",this.onMouseUpOrTouchEndDocument),document.removeEventListener("touchmove",this.onMouseMoveOrTouchMoveDocument),document.removeEventListener("touchend",this.onMouseUpOrTouchEndDocument)}addPin(){const{props:{model:e,dispatch:t}}=this;t(s.default.addPin(e.get("id")))}deletePin(){const{props:{model:e,dispatch:t}}=this;t(s.default.deletePin({id:e.get("id"),removed:e.get("inputPins").size-1}))}onKeyDown(e){const{keyCode:t,currentTarget:{selectionStart:n,selectionEnd:o}}=e,{props:{dispatch:r,model:i}}=this;if(9===t){e.preventDefault();const t=i.get("value");r(s.default.updateBlock(i.get("id"),{value:`${t.substring(0,n)}\t${t.substring(o)}`}))}}render(){const{props:{model:e}}=this,t=e.get("color");return a.default.createElement("div",{className:"Block__base_3ulp8",onMouseDown:this.onMouseDownOrTouchStart,onTouchStart:this.onMouseDownOrTouchStart,style:{position:"absolute",left:e.get("x"),top:e.get("y"),height:e.get("height")}},a.default.createElement("div",null,e.get("deletable")?a.default.createElement("button",{className:"Block__red_1kUYK",onClick:this.onClickDeleteButton},"x"):null,e.get("changeable")?a.default.createElement("button",{onClick:this.addPin},"+"):null,e.get("changeable")?a.default.createElement("button",{onClick:this.deletePin},"-"):null),a.default.createElement("div",{className:"Block__textarea-div_19vCU"},a.default.createElement(u.default,{readOnly:!e.get("editable"),onChange:this.onChange,value:e.get("value"),spellCheck:!1,style:{borderLeft:`5px solid ${t}`},onKeyDown:this.onKeyDown})))}}).prototype,"onChange",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"onChange"),r.prototype),h(r.prototype,"onClickDeleteButton",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"onClickDeleteButton"),r.prototype),h(r.prototype,"onMouseDownOrTouchStart",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseDownOrTouchStart"),r.prototype),h(r.prototype,"onMouseMoveOrTouchMoveDocument",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseMoveOrTouchMoveDocument"),r.prototype),h(r.prototype,"onMouseUpOrTouchEndDocument",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseUpOrTouchEndDocument"),r.prototype),h(r.prototype,"addPin",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"addPin"),r.prototype),h(r.prototype,"deletePin",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"deletePin"),r.prototype),h(r.prototype,"onKeyDown",[l.default],Object.getOwnPropertyDescriptor(r.prototype,"onKeyDown"),r.prototype),o=r))||o;t.default=f},234:function(e,t,n){"use strict";var o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(2),a=g(i),c=n(43),s=g(n(233)),l=g(n(229)),u=g(n(26)),d=g(n(225)),p=g(n(224)),h=g(n(25)),f=g(n(60)),b=g(n(223)),m=n(34),v=n(93),_=n(73),y=n(135);function g(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,o,r){var i={};return Object.keys(o).forEach(function(e){i[e]=o[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,o){return o(e,t,n)||n},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}n(213),window.ontouchmove=(()=>{});let k=(0,c.connect)(({blocks:e,pointLink:t,pinLinks:n,blockCreator:o})=>({blocks:e,link:t,links:n,blockCreator:o}))((O((r=class e extends i.Component{static convertPinTypeToPinLinkKey(e){switch(e){case m.Pin.OUTPUT:return"output";case m.Pin.INPUT:return"input";default:throw new Error("Unknown pin type")}}componentDidMount(){window.addEventListener("message",this.onMessage)}componentWillReceiveProps(e){const{blocks:t,links:n}=e;localStorage.setItem("storedState",JSON.stringify({blocks:t.toJS(),links:n.toJS()}))}componentWillUnmount(){window.removeEventListener("message",this.onMessage)}onConnectStart(e,t,n){const{props:{dispatch:o}}=this,r=t.get("type"),i=t.get("index"),a=[u.default.startPointLink({x:t.get("cx"),y:t.get("cy")})];document.addEventListener("mousemove",this.onConnecting),document.addEventListener("mouseup",this.onConnectEnd),document.addEventListener("touchmove",this.onConnecting),document.addEventListener("touchend",this.onConnectEnd),window.__connection__={block:n,pin:i,pinType:r},r===m.Pin.INPUT&&a.push(u.default.removePinLinkByQuery({input:{block:n,pin:i}})),o((0,v.batchActions)(a))}onConnecting(e){const{props:{dispatch:t}}=this,{clientX:n,clientY:o}=(0,_.getMouseOrFirstTouchPosition)(e);e.preventDefault(),t(u.default.endPointLink({x:n,y:o}))}onConnectEnd(){const{props:{dispatch:e}}=this;e(u.default.startPointLink({x:0,y:0})),document.removeEventListener("mousemove",this.onConnecting),document.removeEventListener("mouseup",this.onConnectEnd),document.removeEventListener("touchmove",this.onConnecting),document.removeEventListener("touchend",this.onConnectEnd)}onConnectPin(t,n,o){const{__connection__:{block:r,pin:i,pinType:a}}=window,{props:{dispatch:c}}=this,s=n.get("index"),l=n.get("type");r!==o&&a!==l&&c(u.default.addPinLink({[e.convertPinTypeToPinLinkKey(a)]:{block:r,pin:i},[e.convertPinTypeToPinLinkKey(l)]:{block:o,pin:s}}))}onMessage(e){const{props:{dispatch:t}}=this,{data:{type:n,value:o}}=e;"chain-result"===n?t(u.default.pushViewBlock(JSON.stringify(o))):"chain-error"===n?y.toast.error(o,{position:y.toast.POSITION.BOTTOM_RIGHT}):"chain-clear"===n&&t(u.default.clearViewBlock())}onMouseDownOrTouchStart(e){const{target:t,currentTarget:n}=e,{clientX:o,clientY:r}=(0,_.getMouseOrFirstTouchPosition)(e),{props:{dispatch:i}}=this;t===n&&i(u.default.showBlockCreator({x:o,y:r}))}render(){const{props:{link:e,links:t,blockCreator:n}}=this;let{props:{blocks:o}}=this;return a.default.createElement("div",{className:"Chain__base_L0Lag"},a.default.createElement("svg",{onMouseDown:this.onMouseDownOrTouchStart,onTouchStart:this.onMouseDownOrTouchStart},t.map((e,t)=>(h.default.forEach(["input","output"],t=>{const n=o.findIndex(n=>n.get("id")===e.getIn([t,"block"]));o=o.setIn([n,`${t}Pins`,e.getIn([t,"pin"]),"linked"],!0)}),a.default.createElement(p.default,{key:t,model:e}))),a.default.createElement(d.default,{model:e})),o.map(e=>{const t=e.get("id");return[a.default.createElement(s.default,{key:t,model:e}),e.get("inputPins").map(e=>a.default.createElement(b.default,{key:e.get("index"),model:e,parent:t,onMouseDownOrTouchStart:this.onConnectStart,onMouseUpOrTouchEnd:this.onConnectPin})),e.get("outputPins").map(e=>a.default.createElement(b.default,{key:e.get("index"),model:e,parent:t,onMouseDownOrTouchStart:this.onConnectStart,onMouseUpOrTouchEnd:this.onConnectPin}))]}),a.default.createElement(l.default,{model:n}))}}).prototype,"onConnectStart",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnectStart"),r.prototype),O(r.prototype,"onConnecting",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnecting"),r.prototype),O(r.prototype,"onConnectEnd",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnectEnd"),r.prototype),O(r.prototype,"onConnectPin",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onConnectPin"),r.prototype),O(r.prototype,"onMessage",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onMessage"),r.prototype),O(r.prototype,"onMouseDownOrTouchStart",[f.default],Object.getOwnPropertyDescriptor(r.prototype,"onMouseDownOrTouchStart"),r.prototype),o=r))||o;t.default=k},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=y(o),i=n(43),a=y(n(234)),c=n(128),s=y(n(211)),l=n(93),u=n(182),d=y(n(204)),p=y(n(201)),h=n(34),f=y(n(26)),b=n(135),m=y(n(25)),v=n(72),_=y(n(186));function y(e){return e&&e.__esModule?e:{default:e}}const{link:g,active:O}=_.default,k=(0,c.createStore)((0,l.enableBatching)(s.default)),P=JSON.parse(localStorage.getItem("storedState"));if(P){const{blocks:e,links:t}=P,{length:n}=e;n>0?k.dispatch((0,l.batchActions)([...m.default.map(e,e=>(m.default.forEach(["inputPins","outputPins"],t=>{m.default.has(e,t)&&(e[t]=(0,v.List)(m.default.map(e[t],e=>new h.Pin(e))))}),f.default.addBlock(e))),...m.default.map(t,e=>f.default.addPinLink(e))])):k.dispatch(f.default.addBlock({x:100,y:100,type:h.BlockCreator.VIEW_BLOCK}))}else k.dispatch(f.default.addBlock({x:100,y:100,type:h.BlockCreator.VIEW_BLOCK}));const E=()=>r.default.createElement(u.Redirect,{to:"/chain"});t.default=class extends o.Component{render(){return r.default.createElement(i.Provider,{store:k},r.default.createElement(u.HashRouter,null,r.default.createElement("div",{className:"App__wrap_1SQHV"},r.default.createElement("div",{className:"App__base_2Rw2G"},r.default.createElement(d.default,null),r.default.createElement(u.Route,{exact:!0,path:"/",render:E}),r.default.createElement(u.Route,{path:"/chain",component:a.default}),r.default.createElement(u.Route,{path:"/editor",component:p.default})),r.default.createElement("footer",null,r.default.createElement(u.NavLink,{to:"/chain",className:g,activeClassName:O},r.default.createElement("span",null,"Chain")),r.default.createElement(u.NavLink,{to:"/editor",className:g,activeClassName:O},r.default.createElement("span",null,"Editor")),r.default.createElement(u.NavLink,{to:"/view",className:g,activeClassName:O},r.default.createElement("span",null,"View"))),r.default.createElement(b.ToastContainer,{autoClose:3e3}))))}}},246:function(e,t,n){"use strict";var o=a(n(2)),r=n(66),i=a(n(237));function a(e){return e&&e.__esModule?e:{default:e}}n(184),(0,r.render)(o.default.createElement(i.default,null),document.querySelector("main"))},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(25),i=(o=r)&&o.__esModule?o:{default:o},a=n(58),c=n(73);t.default=(0,a.createActions)({ADD_BLOCK:e=>i.default.merge({id:c.generator.id()},e),UPDATE_BLOCK:(e,t)=>({id:e,patch:t}),DELTA_MOVE_BLOCK:(e,t,n)=>({id:e,dx:t,dy:n}),TOGGLE_BLOCK_CREATOR:(e,t)=>({x:e,y:t})},"DELETE_BLOCK","UPDATE_BLOCK_CREATOR","ADD_PIN","DELETE_PIN","START_POINT_LINK","END_POINT_LINK","ADD_PIN_LINK","REMOVE_PIN_LINK_BY_QUERY","ON_CHANGE_HTML","CLEAR_VIEW_BLOCK","PUSH_VIEW_BLOCK","SHOW_BLOCK_CREATOR")},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PinLink=t.PointLink=t.BlockCreator=t.Pin=t.Block=void 0;var o=n(72),r=a(n(25)),i=a(n(94));function a(e){return e&&e.__esModule?e:{default:e}}const{white0:c,purple0:s,blue1:l,yellow0:u,blockWidth:d}=i.default,p=r.default.parseInt(d),h={VALUE_BLOCK:"VALUE_BLOCK",FUNCTION_BLOCK:"FUNCTION_BLOCK",PROPERTY_BLOCK:"PROPERTY_BLOCK",OPERATOR_BLCOK:"OPERATOR_BLCOK"},f=r.default.keys(h);t.Block=class e extends((0,o.Record)({id:0,value:"",x:0,y:0,deletable:!0,editable:!0,type:"",color:c,changeable:!0,outputPins:(0,o.List)(),inputPins:(0,o.List)(),height:70})){constructor(e){switch(super(e),this.type){case m.VIEW_BLOCK:return this.merge({editable:!1,deletable:!1,color:s,inputPins:this._createPins([c],b.INPUT)}).recalculateHeight();case m.CREATABLE_TYPES.VALUE_BLOCK:return this.merge({changeable:!1,outputPins:this._createPins([s],b.OUTPUT)}).recalculateHeight();case m.CREATABLE_TYPES.FUNCTION_BLOCK:return this.merge({color:l,inputPins:this._createPins([l],b.INPUT),outputPins:this._createPins([s],b.OUTPUT)}).recalculateHeight();case m.CREATABLE_TYPES.PROPERTY_BLOCK:return this.merge({changeable:!1,color:u,inputPins:this._createPins([c],b.INPUT),outputPins:this._createPins([c],b.OUTPUT)}).recalculateHeight();case m.CREATABLE_TYPES.OPERATOR_BLCOK:return this.merge({changeable:!1,inputPins:this._createPins([c,c],b.INPUT),outputPins:this._createPins([c],b.OUTPUT)}).recalculateHeight()}}recalculateHeight(){const{inputPins:{size:e},outputPins:{size:t}}=this;return this.set("height",Math.max(4,e+1,t+1)*(2*b.RADIUS+3)-1)}dmove(e,t){const{x:n,y:o,inputPins:r,outputPins:i}=this;return this.merge({x:n+e,y:o+t,inputPins:r.map(n=>n.dmove(e,t)),outputPins:i.map(n=>n.dmove(e,t))})}createPin(t,n,o=null){const{x:i,y:a}=this,c=e.convertPinTypeToPinKey(n),{size:s}=this.get(c),l=r.default.isNull(o)?s:o,[u,d]=e._pinPosition(l,n);return new b({index:l,color:t,type:n,cx:i+u,cy:a+d})}_createPins(t,n){const i=this.get(e.convertPinTypeToPinKey(n));return 0===i.size?(0,o.List)(r.default.map(t,(e,t)=>this.createPin(e,n,t))):i}static convertPinTypeToPinKey(e){switch(e){case b.OUTPUT:return"outputPins";case b.INPUT:return"inputPins";default:throw new Error("Unknown pin type")}}static _pinPosition(e,t){return[t===b.INPUT?-b.RADIUS-2:t===b.OUTPUT?p+b.RADIUS:0,b.RADIUS+(2*b.RADIUS+3)*e+1]}};let b=t.Pin=class extends((0,o.Record)({index:0,color:c,type:"",linked:!1,cx:0,cy:0})){dmove(e,t){const{cx:n,cy:o}=this;return this.merge({cx:n+e,cy:o+t})}static get OUTPUT(){return"OUTPUT_PIN"}static get INPUT(){return"INPUT_PIN"}static get RADIUS(){return 7}static get S_RADIUS(){return 4}},m=t.BlockCreator=class extends((0,o.Record)({x:0,y:0,visible:!1,value:"",selected:f[0]})){show(e,t){return this.merge({visible:!0,x:e,y:t,value:"",selected:f[0]})}static get CREATABLE_TYPES(){return h}static get CREATABLE_TYPE_KEYS(){return f}static get VIEW_BLOCK(){return"VIEW_BLOCK"}};t.PointLink=class extends((0,o.Record)({ax:0,ay:0,bx:0,by:0})){start(e,t){return this.merge({ax:e,ay:t,bx:e,by:t})}end(e,t){return this.merge({bx:e,by:t})}points(){const{ax:e,ay:t,bx:n,by:o}=this;return[e,t,n,o]}},t.PinLink=class e extends((0,o.Record)({output:(0,o.Map)({block:0,pin:0}),input:(0,o.Map)({block:0,pin:0})})){constructor(e){r.default.forEach(["output","input"],t=>{r.default.has(e,t)&&(e[t]=(0,o.Map)(e[t]))}),super(e)}hasBlock(e){return r.default.some(["output","input"],t=>this.getIn([t,"block"])===e)}match({output:t,input:n}){return e._matcher(this.get("output"),t)&&e._matcher(this.get("input"),n)}static _matcher(t,n){return r.default.isObject(n)?!r.default.some(r.default.toPairs(n),([n,o])=>!e._matcher(t.get(n),o)):void 0!==t&&(void 0===n||t===n)}}},449:function(e,t,n){n(448),e.exports=n(246)},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generator=t.getMouseOrFirstTouchPosition=t.cosineCurvePoints=t.dist=void 0;var o,r=n(25),i=(o=r)&&o.__esModule?o:{default:o};const a=t.dist=((e,t,n,o)=>Math.sqrt(Math.pow(e-n,2)+Math.pow(t-o,2)));t.cosineCurvePoints=((e,t,n,o,r=10)=>{const i=a(e,t,n,o);if(0===i)return[];const c=(n-e)/i,s=o-t,l=[];for(let u=0;u<=i;u+=1){const d=e+c*u,p=t+s*(1-Math.cos(Math.PI/i*u))/2;r<a(e,t,d,p)&&r<a(n,o,d,p)&&l.push(d,p)}return l}),t.getMouseOrFirstTouchPosition=(e=>{const{type:t,changedTouches:n}=e;if(i.default.includes(["mousedown","mousemove","mouseup"],t))return e;if(i.default.includes(["touchstart","touchmove","touchend"],t))return n.item(0);throw new Error("Unknown event type")}),t.generator=new class e{static get ZEROS_42(){return"000000000000000000000000000000000000000000"}static get ZEROS_12(){return"000000000000"}constructor(){this.sequence=0,this.ptime=0}id(){const t=Date.now();t===this.ptime?this.sequence+=1:this.sequence=0;const n=(e.ZEROS_42+(t-1288834974657).toString(2)).slice(-42),o=(e.ZEROS_12+this.sequence.toString(2)).slice(-12);return i.default.parseInt(`${n}${o}`,2)}}},94:function(e,t,n){var o=n(228);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(35)(o,r);o.locals&&(e.exports=o.locals)}});